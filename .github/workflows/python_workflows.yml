name: python

on:
  workflow_call:
    inputs:
      config-path:
        required: true
        type: string
    secrets:
      token:
        required: true
  workflow_dispatch:
    inputs:
      config-path:
        description:
        required: true
        type: string

jobs:
  dependencies:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install Python and Dependencies
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install -r requirements.txt

      # Enregistrement de l'environnement en tant que fichier zip
      - name: Package environment as zip
        run: zip -r environment.zip .  # Assurez-vous d'être dans le bon répertoire

      # Ajout du chemin de l'environnement zippé en sortie
      - name: Output environment zip path
        id: output_env_path
        run: echo "::set-output name=env_zip_path::$(pwd)/environment.zip"

      
